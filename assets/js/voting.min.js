!function(n){"use strict";n(function(){var s=!1;n(".comments-main").on("click","div.comment-weight-container span > a:not([href])",_.throttle(function(t){t.preventDefault();var e=0,o=n(this).data("commentId"),a=n(this).closest("span").attr("class");"upvote"!==a&&n(this).hasClass("vote-up")?e="upvote":"downvote"!==a&&n(this).hasClass("vote-down")?e="downvote":("downvote"===a&&n(this).hasClass("vote-down")||"upvote"===a&&n(this).hasClass("vote-up"))&&(e="undo"),!1===s&&(s=!0,n.post(comment_popularity.ajaxurl,{action:"comment_vote_callback",vote:e,comment_id:o,hmn_vote_nonce:comment_popularity.hmn_vote_nonce}).done(function(t){var e=n("#comment-weight-value-"+t.data.comment_id);if(!1===t.success)n.growl({title:"Error!",style:"error",message:t.data.error_message});else{if(e.text(t.data.weight),e.closest(".comment-weight-container ").children().removeClass(),"undo"!==t.data.vote_type)switch(e.addClass(t.data.vote_type),t.data.vote_type){case"upvote":e.prev().addClass(t.data.vote_type);break;case"downvote":e.next().addClass(t.data.vote_type)}n.growl({title:"Success!",style:"notice",message:t.data.success_message})}s=!1}))},500))})}(jQuery);