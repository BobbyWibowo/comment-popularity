!function(r){"use strict";r(function(){var d=!1;r(".comments-main").on("click","div.comment-weight-container span > a:not([href])",_.throttle(function(t){t.preventDefault();var e=0,a=r(this).data("commentId"),s=r(this).closest("span").attr("class"),o={},n=r(this).parents("#comments[data-post-id]").get(0);n&&n.dataset.postId&&(o[n.dataset.postId]=!0);var c=r('#main > article[id^="post"]').get(0);if(c){var i=c.id.replace("post-","");void 0!==i&&(o[i]=!0)}"upvote"!==s&&r(this).hasClass("vote-up")?e="upvote":"downvote"!==s&&r(this).hasClass("vote-down")?e="downvote":("downvote"===s&&r(this).hasClass("vote-down")||"upvote"===s&&r(this).hasClass("vote-up"))&&(e="undo"),!1===d&&(d=!0,r.post(comment_popularity.ajaxurl,{action:"comment_vote_callback",vote:e,comment_id:a,post_ids:Object.keys(o),hmn_vote_nonce:comment_popularity.hmn_vote_nonce}).done(function(t){var e=r("#comment-weight-value-"+t.data.comment_id);if(!1===t.success)r.growl({title:"Error!",style:"error",message:t.data.error_message});else{if(e.text(t.data.weight),e.closest(".comment-weight-container ").children().removeClass(),"undo"!==t.data.vote_type)switch(e.addClass(t.data.vote_type),t.data.vote_type){case"upvote":e.prev().addClass(t.data.vote_type);break;case"downvote":e.next().addClass(t.data.vote_type)}r.growl({title:"Success!",style:"notice",message:t.data.success_message})}d=!1}))},500))})}(jQuery);